# 員編功能使用說明

## 資料庫變更

執行以下 SQL migration 來添加員編欄位：

```sql
-- 在 Supabase SQL Editor 中執行

-- 添加 employee_code 欄位
ALTER TABLE profiles ADD COLUMN IF NOT EXISTS employee_code VARCHAR(20);

-- 為 employee_code 欄位添加索引以提升搜尋效能
CREATE INDEX IF NOT EXISTS idx_profiles_employee_code ON profiles(employee_code);

-- 添加註解說明
COMMENT ON COLUMN profiles.employee_code IS '員工編號（例如: FK0171, FKPT0171）';
```

## 功能說明

### 1. 使用者管理頁面 (/admin/users)

**新增功能：**
- 表格新增「員編」欄位
- 編輯使用者時可以設定員編
- 搜尋框支援員編搜尋（部分匹配）

**搜尋範例：**
- 輸入 `171` 可找到 `FK0171` 和 `FKPT0171`
- 輸入 `FK0` 可找到所有 FK 開頭的員編
- 支援姓名、郵件、員編三種搜尋方式

### 2. 經理/督導管理頁面 (/admin/supervisors)

**改進：**
- 從顯示所有經理/督導改為搜尋選擇模式
- 避免頁面過長
- 更快速找到目標人員

**使用流程：**
1. 在搜尋框輸入姓名、郵件或員編
2. 從下拉選單中選擇目標人員
3. 為該人員勾選可管理的門市
4. 點擊「儲存」按鈕

**搜尋功能：**
- 支援姓名、郵件、員編搜尋
- 部分匹配（例如輸入 171 可找到 FK0171）
- 即時顯示搜尋結果
- 如有多個符合結果，顯示選項供選擇

## 使用範例

### 範例 1：設定員編

1. 前往「使用者管理」
2. 找到目標使用者，點擊「編輯」
3. 在「員編」欄位輸入 `FK0171`
4. 點擊「儲存」

### 範例 2：用員編搜尋人員

1. 在搜尋框輸入 `171`
2. 系統會顯示所有包含 171 的員編：
   - FK0171
   - FKPT0171
3. 選擇正確的人員

### 範例 3：為經理分配門市

1. 前往「門市管理」→「經理/督導」
2. 在搜尋框輸入經理的名字或員編
3. 從下拉選單選擇該經理
4. 勾選要分配的門市
5. 點擊「儲存」

## 注意事項

1. **員編格式**：建議統一格式，例如 FK0171、FKPT0171
2. **唯一性**：雖然系統不強制員編唯一，但建議每個員工使用不同的員編
3. **搜尋提示**：如果搜尋結果過多，可以輸入更多字元來縮小範圍
4. **權限要求**：只有管理員可以編輯員編和管理經理/督導
